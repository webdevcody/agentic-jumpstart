/**
 * Generates unique, privacy-friendly aliases for users.
 * Format: "Adjective Noun ##" (e.g., "Swift Falcon 42", "Bright Coder 78")
 */

const ADJECTIVES = [
  "Swift",
  "Bright",
  "Clever",
  "Bold",
  "Quick",
  "Sharp",
  "Calm",
  "Keen",
  "Brave",
  "Noble",
  "Wise",
  "Agile",
  "Cosmic",
  "Digital",
  "Epic",
  "Flying",
  "Golden",
  "Happy",
  "Jolly",
  "Lucky",
  "Mighty",
  "Nimble",
  "Pixel",
  "Quantum",
  "Rapid",
  "Silent",
  "Turbo",
  "Ultra",
  "Vivid",
  "Warp",
  "Radiant",
  "Luminous",
  "Gleaming",
  "Fierce",
  "Stellar",
  "Sly",
  "Sonic",
  "Blazing",
  "Crystal",
  "Daring",
  "Dashing",
  "Stealthy",
  "Electric",
  "Galactic",
  "Heroic",
  "Icy",
  "Ivory",
  "Jazzy",
  "Majestic",
  "Mercurial",
  "Merry",
  "Mystic",
  "Neon",
  "Opal",
  "Optimal",
  "Plucky",
  "Polar",
  "Posh",
  "Prime",
  "Primal",
  "Regal",
  "Retro",
  "Rocking",
  "Royal",
  "Rustic",
  "Sage",
  "Sassy",
  "Shadowy",
  "Shiny",
  "Silk",
  "Silver",
  "Slick",
  "Smiling",
  "Solar",
  "Sparkling",
  "Spicy",
  "Spirited",
  "Stone",
  "Stormy",
  "Sunny",
  "Super",
  "Tangy",
  "Tenacious",
  "Thermal",
  "Thunder",
  "Titanium",
  "Twisted",
  "Unseen",
  "Valiant",
  "Velvet",
  "Vibrant",
  "Vintage",
  "Visionary",
  "Volt",
  "Wandering",
  "Wired",
  "Zenith",
  "Zesty",
  "Atomic",
  "Breezy",
  "Crisp",
  "Cryptic",
  "Dapper",
  "Deep",
  "Divine",
  "Dynamic",
  "Enigmatic",
  "Ethereal",
  "Evergreen",
  "Exalted",
  "Flash",
  "Flawless",
  "Fleet",
  "Floral",
  "Flux",
  "Frisky",
  "Frosty",
  "Gale",
  "Gentle",
  "Glorious",
  "Grand",
  "Gracious",
  "Handy",
  "Harmony",
  "Haute",
  "Humble",
  "Hyper",
  "Iconic",
  "Illustrious",
  "Impressive",
  "Adroit",
  "Alluring",
  "Amber",
  "Ambitious",
  "Amazing",
  "Ample",
  "Animated",
  "Antique",
  "Aqueous",
  "Arcane",
  "Aristocratic",
  "Aromatic",
  "Ashen",
  "Assertive",
  "Astute",
  "Autumnal",
  "Balanced",
  "Bionic",
  "Blissful",
  "Blunt",
  "Bonny",
  "Booming",
  "Boundless",
  "Brisk",
  "Bronze",
  "Buoyant",
  "Capable",
  "Captivating",
  "Celestial",
  "Charming",
  "Chipper",
  "Classic",
  "Cuddly",
  "Dainty",
  "Debonair",
  "Decisive",
  "Deft",
  "Delicate",
  "Deluxe",
  "Dependable",
  "Devoted",
  "Diligent",
  "Dreamy",
  "Durable",
  "Effortless",
  "Eloquent",
  "Ember",
  "Empowered",
  "Enduring",
  "Euphoric",
  "Exuberant",
  "Fabled",
  "Fanciful",
  "Fearless",
  "Ferocious",
  "Finessed",
  "Fleetfoot",
  "Fluent",
  "Formidable",
  "Fortunate",
  "Frugal",
  "Futuristic",
  "Glistening",
  "Grounded",
  "Hearty",
  "Heavenly",
  "Honorable",
  "Hushed",
  "Ideal",
  "Illuminated",
  "Immaculate",
  "Indomitable",
  "Ingenious",
  "Intrepid",
  "Iridescent",
  "Jubilant",
  "Kinetic",
  "Lithe",
  "Mellow",
  "Minty",
  "Mirthful",
  "Moxie",
  "Nocturnal",
  "Opulent",
  "Ornate",
  "Piquant",
  "Polished",
  "Prismatic",
  "Resolute",
  "Resourceful",
  "Robust",
  "Rugged",
  "Sapphire",
  "Serene",
  "Sleek",
  "Smoldering",
  "Solid",
  "Splendid",
  "Spry",
  "Sturdy",
];

const NOUNS = [
  "Falcon",
  "Coder",
  "Phoenix",
  "Tiger",
  "Eagle",
  "Wolf",
  "Panda",
  "Dragon",
  "Hawk",
  "Lion",
  "Bear",
  "Fox",
  "Raven",
  "Owl",
  "Ninja",
  "Pilot",
  "Ranger",
  "Scout",
  "Spark",
  "Star",
  "Storm",
  "Byte",
  "Node",
  "Query",
  "Stack",
  "Vector",
  "Vertex",
  "Cipher",
  "Matrix",
  "Pulse",
  "Comet",
  "Orbit",
  "Meteor",
  "Rocket",
  "Nova",
  "Aurora",
  "Galaxy",
  "Cosmos",
  "Nebula",
  "Pulsar",
  "Quasar",
  "Zenith",
  "Apex",
  "Summit",
  "Anchor",
  "Beacon",
  "Bolt",
  "Circuit",
  "Core",
  "Crest",
  "Drift",
  "Echo",
  "Flare",
  "Fusion",
  "Glitch",
  "Gradient",
  "Horizon",
  "Hub",
  "Influx",
  "Ion",
  "Jolt",
  "Kernel",
  "Latch",
  "Legend",
  "Lighthouse",
  "Loop",
  "Mosaic",
  "Nimbus",
  "Oasis",
  "Oracle",
  "Outpost",
  "Paradox",
  "Path",
  "Pivot",
  "Plasma",
  "Portal",
  "Prism",
  "Radar",
  "Reactor",
  "Rotor",
  "Rune",
  "Saber",
  "Schematic",
  "Sector",
  "Sentinel",
  "Sequence",
  "Shard",
  "Shield",
  "Signal",
  "Skylark",
  "Solace",
  "Solstice",
  "Spire",
  "Spectrum",
  "Spiral",
  "Sprite",
  "Stratus",
  "Striker",
  "Summoner",
  "Surge",
  "Talon",
  "Tide",
  "Trail",
  "Trek",
  "Trident",
  "Tron",
  "Vanguard",
  "Velo",
  "Vessel",
  "Vortex",
  "Warden",
  "Wave",
  "Whisper",
  "Wind",
  "Wing",
  "Wisp",
  "Yonder",
  "Zen",
  "Zodiac",
  "Cache",
  "Catalyst",
  "Cluster",
  "Cobalt",
  "Cruiser",
  "Dash",
  "Dynamo",
  "Eon",
  "Epoch",
  "Glyph",
  "Harbinger",
  "Atlas",
  "Beaconry",
  "Binary",
  "Bitstream",
  "Bytecode",
  "Chassis",
  "Chronicle",
  "Circuitry",
  "Citrine",
  "Conduit",
  "Continuum",
  "Corsair",
  "Crux",
  "Cumulus",
  "Cursor",
  "DynamoCore",
  "Eclipse",
  "Ember",
  "Enclave",
  "Entropy",
  "Eonflux",
  "Equinox",
  "Etherium",
  "Excalibur",
  "Fathom",
  "Fervor",
  "Fluxion",
  "Forge",
  "Frame",
  "Frontier",
  "Galvanic",
  "Grove",
  "Halo",
  "Helix",
  "Herald",
  "Holo",
  "Hydra",
  "Igniter",
  "Illume",
  "Impulse",
  "Incisor",
  "Indigo",
  "Inferno",
  "Instinct",
  "Interface",
  "Interlock",
  "Isotope",
  "Keystone",
  "Labyrinth",
  "Lantern",
  "Lattice",
  "Lumen",
  "Luster",
  "Mach",
  "Magnet",
  "Majesty",
  "Mariner",
  "Mercury",
  "Milestone",
  "Mistral",
  "Monolith",
  "Muse",
  "Mutiny",
  "Nomad",
  "Northstar",
  "Nucleus",
  "Nyx",
  "Obelisk",
  "Obsidian",
  "Odyssey",
  "Omega",
  "Onyx",
  "Orbitron",
  "Overture",
  "Pacer",
  "Paragon",
  "Pioneer",
  "Pixelcraft",
  "Plinth",
  "Polarion",
  "Polaris",
  "Polygon",
  "Pulsewave",
  "Quill",
  "Quintet",
  "Radiance",
  "Rift",
  "Sanctum",
  "Scepter",
  "Sentience",
  "Shore",
  "Sigil",
  "Silhouette",
  "Skylight",
  "Soul",
  "Specter",
  "Splice",
  "Sprinter",
  "Starfall",
  "Sundial",
];

function getRandomElement<T>(array: T[]): T {
  return array[Math.floor(Math.random() * array.length)];
}

function getRandomNumber(min: number, max: number): number {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

/**
 * Generates a random alias in the format "Adjective Noun ##"
 */
export function generateAlias(): string {
  const adjective = getRandomElement(ADJECTIVES);
  const noun = getRandomElement(NOUNS);
  const number = getRandomNumber(10, 99);
  return `${adjective} ${noun} ${number}`;
}

/**
 * Generates a unique alias by checking against existing aliases.
 * Will retry up to maxAttempts times before falling back to a UUID-based alias.
 */
export async function generateUniqueAlias(
  checkExists: (alias: string) => Promise<boolean>,
  maxAttempts = 10
): Promise<string> {
  for (let i = 0; i < maxAttempts; i++) {
    const alias = generateAlias();
    const exists = await checkExists(alias);
    if (!exists) {
      return alias;
    }
  }

  // Fallback: use timestamp-based suffix for guaranteed uniqueness
  const adjective = getRandomElement(ADJECTIVES);
  const noun = getRandomElement(NOUNS);
  const timestamp = Date.now().toString(36).slice(-4);
  return `${adjective} ${noun} ${timestamp}`;
}
